ARM GAS  /tmp/cclnTmoR.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"rtc.c"
  12              		.section	.rodata.str1.4,"aMS",%progbits,1
  13              		.align	2
  14              	.LC0:
  15 0000 4D6F6E00 		.ascii	"Mon\000"
  16              		.align	2
  17              	.LC1:
  18 0004 54756500 		.ascii	"Tue\000"
  19              		.align	2
  20              	.LC2:
  21 0008 57656400 		.ascii	"Wed\000"
  22              		.align	2
  23              	.LC3:
  24 000c 54687500 		.ascii	"Thu\000"
  25              		.align	2
  26              	.LC4:
  27 0010 46726900 		.ascii	"Fri\000"
  28              		.align	2
  29              	.LC5:
  30 0014 53617400 		.ascii	"Sat\000"
  31              		.align	2
  32              	.LC6:
  33 0018 53756E00 		.ascii	"Sun\000"
  34              		.text
  35              	.Ltext0:
  36              		.cfi_sections	.debug_frame
  37              		.section	.text.HAL_RTC_MspDeInit,"ax",%progbits
  38              		.align	1
  39              		.global	HAL_RTC_MspDeInit
  40              		.arch armv7-m
  41              		.syntax unified
  42              		.thumb
  43              		.thumb_func
  44              		.fpu softvfp
  46              	HAL_RTC_MspDeInit:
  47              	.LVL0:
  48              	.LFB69:
  49              		.file 1 "component/rtc/rtc.c"
   1:component/rtc/rtc.c **** #include "rtc.h"
   2:component/rtc/rtc.c **** #include "string.h"
   3:component/rtc/rtc.c **** 
   4:component/rtc/rtc.c **** 
   5:component/rtc/rtc.c **** #define RTC_STATUS_INIT_OK              0x1234       /* RTC initialised */
   6:component/rtc/rtc.c **** #define RTC_STATUS_TIME_OK              0x4321       /* RTC time OK */
   7:component/rtc/rtc.c **** #define	RTC_STATUS_ZERO                 0x0000
   8:component/rtc/rtc.c **** #define RTC_STATUS_REG                  RTC_BKP_DR1
   9:component/rtc/rtc.c **** 
ARM GAS  /tmp/cclnTmoR.s 			page 2


  10:component/rtc/rtc.c **** #define RTC_OFFSET_YEAR                 1970
  11:component/rtc/rtc.c **** #define RTC_SECONDS_PER_DAY             86400
  12:component/rtc/rtc.c **** #define RTC_SECONDS_PER_HOUR            3600
  13:component/rtc/rtc.c **** #define RTC_SECONDS_PER_MINUTE          60
  14:component/rtc/rtc.c **** 
  15:component/rtc/rtc.c **** #define Chine_Compensation              8*3600
  16:component/rtc/rtc.c **** 
  17:component/rtc/rtc.c **** #define ZL_Is_LeapYear(year)            ((((year) % 4 == 0) && ((year) % 100 != 0)) || ((year) % 40
  18:component/rtc/rtc.c **** #define ZL_Year2Days(x)                 ZL_Is_LeapYear(x) ? 366 : 365
  19:component/rtc/rtc.c **** 
  20:component/rtc/rtc.c **** 
  21:component/rtc/rtc.c **** RTC_HandleTypeDef hRTC;
  22:component/rtc/rtc.c **** RTC_DateTypeDef RTC_DateStruct;
  23:component/rtc/rtc.c **** RTC_TimeTypeDef RTC_TimeStruct;
  24:component/rtc/rtc.c **** 
  25:component/rtc/rtc.c **** 
  26:component/rtc/rtc.c **** static uint8_t RTC_Months[2][12] = {
  27:component/rtc/rtc.c **** 	{31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},	/* Not leap year */
  28:component/rtc/rtc.c **** 	{31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}	/* Leap year */
  29:component/rtc/rtc.c **** };
  30:component/rtc/rtc.c **** 
  31:component/rtc/rtc.c **** 
  32:component/rtc/rtc.c **** uint8_t ZL_RTC_Init(ZL_RTC_t *ZL_Time)
  33:component/rtc/rtc.c **** {
  34:component/rtc/rtc.c **** 
  35:component/rtc/rtc.c **** 	hRTC.Instance = RTC;
  36:component/rtc/rtc.c **** 	hRTC.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
  37:component/rtc/rtc.c **** 
  38:component/rtc/rtc.c **** 	HAL_PWR_EnableBkUpAccess();
  39:component/rtc/rtc.c **** 	__HAL_RCC_BKP_CLK_ENABLE();
  40:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
  41:component/rtc/rtc.c **** 
  42:component/rtc/rtc.c ****   	HAL_NVIC_SetPriority(RTC_IRQn, 0, 1);
  43:component/rtc/rtc.c ****   	HAL_NVIC_EnableIRQ(RTC_IRQn);
  44:component/rtc/rtc.c **** 	  /* RTC Second IT */
  45:component/rtc/rtc.c ****   	//HAL_RTCEx_SetSecond_IT(&hRTC);
  46:component/rtc/rtc.c ****   
  47:component/rtc/rtc.c **** 	uint32_t status = HAL_RTCEx_BKUPRead(&hRTC, RTC_STATUS_REG);
  48:component/rtc/rtc.c **** 	if (status == RTC_STATUS_TIME_OK) 
  49:component/rtc/rtc.c ****   	{
  50:component/rtc/rtc.c **** 		HAL_RTC_WaitForSynchro(&hRTC);
  51:component/rtc/rtc.c **** 		__HAL_RCC_CLEAR_RESET_FLAGS();
  52:component/rtc/rtc.c **** 		return 1;
  53:component/rtc/rtc.c **** 	}
  54:component/rtc/rtc.c ****   	else 
  55:component/rtc/rtc.c ****   	{
  56:component/rtc/rtc.c ****   	  	HAL_RTC_Init(&hRTC);
  57:component/rtc/rtc.c ****   	  	if(HAL_RTC_Init(&hRTC) != HAL_OK)
  58:component/rtc/rtc.c ****   	  	{
  59:component/rtc/rtc.c ****   	    	Error_Handler();
  60:component/rtc/rtc.c ****   	  	}
  61:component/rtc/rtc.c ****   	  	ZL_RTC_SetTime(ZL_Time);
  62:component/rtc/rtc.c **** 		HAL_RTCEx_BKUPWrite(&hRTC, RTC_BKP_DR1, RTC_STATUS_TIME_OK);
  63:component/rtc/rtc.c **** 		return 0;
  64:component/rtc/rtc.c **** 	}
  65:component/rtc/rtc.c **** }
  66:component/rtc/rtc.c **** 
ARM GAS  /tmp/cclnTmoR.s 			page 3


  67:component/rtc/rtc.c **** 
  68:component/rtc/rtc.c **** 
  69:component/rtc/rtc.c **** void ZL_RTC_SetTime(const ZL_RTC_t *ZL_Time)
  70:component/rtc/rtc.c **** {
  71:component/rtc/rtc.c ****   ZL_RTC_writeCounter(&hRTC, (ZL_RTC_DateToSec(ZL_Time) - Chine_Compensation));
  72:component/rtc/rtc.c **** }
  73:component/rtc/rtc.c **** 
  74:component/rtc/rtc.c **** 
  75:component/rtc/rtc.c **** 
  76:component/rtc/rtc.c **** void ZL_RTC_GetTime(ZL_RTC_t *ZL_Time)
  77:component/rtc/rtc.c **** {
  78:component/rtc/rtc.c ****   ZL_RTC_SecToDate(ZL_Time, ZL_RTC_ReadCounter(&hRTC));
  79:component/rtc/rtc.c **** }
  80:component/rtc/rtc.c **** 
  81:component/rtc/rtc.c **** 
  82:component/rtc/rtc.c **** 
  83:component/rtc/rtc.c **** void HAL_RTC_MspDeInit(RTC_HandleTypeDef* rtcHandle)
  84:component/rtc/rtc.c **** {
  50              		.loc 1 84 1 view -0
  51              		.cfi_startproc
  52              		@ args = 0, pretend = 0, frame = 0
  53              		@ frame_needed = 0, uses_anonymous_args = 0
  54              		@ link register save eliminated.
  85:component/rtc/rtc.c ****   if(rtcHandle->Instance==RTC)
  55              		.loc 1 85 3 view .LVU1
  56              		.loc 1 85 15 is_stmt 0 view .LVU2
  57 0000 0268     		ldr	r2, [r0]
  58              		.loc 1 85 5 view .LVU3
  59 0002 044B     		ldr	r3, .L4
  60 0004 9A42     		cmp	r2, r3
  61 0006 00D0     		beq	.L3
  62              	.L1:
  86:component/rtc/rtc.c ****   {
  87:component/rtc/rtc.c ****     __HAL_RCC_RTC_DISABLE();
  88:component/rtc/rtc.c ****   }
  89:component/rtc/rtc.c **** }
  63              		.loc 1 89 1 view .LVU4
  64 0008 7047     		bx	lr
  65              	.L3:
  87:component/rtc/rtc.c ****   }
  66              		.loc 1 87 5 is_stmt 1 view .LVU5
  67 000a 034B     		ldr	r3, .L4+4
  68 000c 0022     		movs	r2, #0
  69 000e 1A60     		str	r2, [r3]
  70              		.loc 1 89 1 is_stmt 0 view .LVU6
  71 0010 FAE7     		b	.L1
  72              	.L5:
  73 0012 00BF     		.align	2
  74              	.L4:
  75 0014 00280040 		.word	1073752064
  76 0018 3C044242 		.word	1111622716
  77              		.cfi_endproc
  78              	.LFE69:
  80              		.section	.text.ZL_RTC_writeCounter,"ax",%progbits
  81              		.align	1
  82              		.global	ZL_RTC_writeCounter
  83              		.syntax unified
ARM GAS  /tmp/cclnTmoR.s 			page 4


  84              		.thumb
  85              		.thumb_func
  86              		.fpu softvfp
  88              	ZL_RTC_writeCounter:
  89              	.LVL1:
  90              	.LFB70:
  90:component/rtc/rtc.c **** 
  91:component/rtc/rtc.c **** 
  92:component/rtc/rtc.c **** 
  93:component/rtc/rtc.c **** void ZL_RTC_writeCounter(RTC_HandleTypeDef* hrtc, uint32_t TimeCounter)
  94:component/rtc/rtc.c **** {
  91              		.loc 1 94 1 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		@ link register save eliminated.
  95:component/rtc/rtc.c ****   TimeCounter += Chine_Compensation;
  96              		.loc 1 95 3 view .LVU8
  97              		.loc 1 95 15 is_stmt 0 view .LVU9
  98 0000 01F5E141 		add	r1, r1, #28800
  99              	.LVL2:
  96:component/rtc/rtc.c ****   __HAL_RTC_WRITEPROTECTION_DISABLE(hrtc);
 100              		.loc 1 96 3 is_stmt 1 view .LVU10
 101 0004 0268     		ldr	r2, [r0]
 102 0006 5368     		ldr	r3, [r2, #4]
 103 0008 43F01003 		orr	r3, r3, #16
 104 000c 5360     		str	r3, [r2, #4]
  97:component/rtc/rtc.c ****   WRITE_REG(hrtc->Instance->CNTH, (TimeCounter >> 16U));
 105              		.loc 1 97 3 view .LVU11
 106 000e 0368     		ldr	r3, [r0]
 107 0010 0A0C     		lsrs	r2, r1, #16
 108 0012 9A61     		str	r2, [r3, #24]
  98:component/rtc/rtc.c ****   WRITE_REG(hrtc->Instance->CNTL, (TimeCounter & RTC_CNTL_RTC_CNT));
 109              		.loc 1 98 3 view .LVU12
 110 0014 0368     		ldr	r3, [r0]
 111 0016 89B2     		uxth	r1, r1
 112              	.LVL3:
 113              		.loc 1 98 3 is_stmt 0 view .LVU13
 114 0018 D961     		str	r1, [r3, #28]
  99:component/rtc/rtc.c ****   __HAL_RTC_WRITEPROTECTION_ENABLE(hrtc);
 115              		.loc 1 99 3 is_stmt 1 view .LVU14
 116 001a 0268     		ldr	r2, [r0]
 117 001c 5368     		ldr	r3, [r2, #4]
 118 001e 23F01003 		bic	r3, r3, #16
 119 0022 5360     		str	r3, [r2, #4]
 100:component/rtc/rtc.c **** }
 120              		.loc 1 100 1 is_stmt 0 view .LVU15
 121 0024 7047     		bx	lr
 122              		.cfi_endproc
 123              	.LFE70:
 125              		.section	.text.ZL_RTC_ReadCounter,"ax",%progbits
 126              		.align	1
 127              		.global	ZL_RTC_ReadCounter
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 131              		.fpu softvfp
ARM GAS  /tmp/cclnTmoR.s 			page 5


 133              	ZL_RTC_ReadCounter:
 134              	.LVL4:
 135              	.LFB71:
 101:component/rtc/rtc.c **** 
 102:component/rtc/rtc.c **** 
 103:component/rtc/rtc.c **** 
 104:component/rtc/rtc.c **** uint32_t ZL_RTC_ReadCounter(RTC_HandleTypeDef* hrtc)
 105:component/rtc/rtc.c **** {
 136              		.loc 1 105 1 is_stmt 1 view -0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              		@ link register save eliminated.
 106:component/rtc/rtc.c ****   uint16_t counter;
 141              		.loc 1 106 3 view .LVU17
 107:component/rtc/rtc.c ****   counter = READ_REG(hrtc->Instance->CNTL);
 142              		.loc 1 107 3 view .LVU18
 143              		.loc 1 107 13 is_stmt 0 view .LVU19
 144 0000 0268     		ldr	r2, [r0]
 145 0002 D369     		ldr	r3, [r2, #28]
 146              	.LVL5:
 108:component/rtc/rtc.c ****   return (((uint32_t)READ_REG(hrtc->Instance->CNTH) << 16) | counter);
 147              		.loc 1 108 3 is_stmt 1 view .LVU20
 148              		.loc 1 108 22 is_stmt 0 view .LVU21
 149 0004 9069     		ldr	r0, [r2, #24]
 150              	.LVL6:
 151              		.loc 1 108 60 view .LVU22
 152 0006 9BB2     		uxth	r3, r3
 109:component/rtc/rtc.c **** }
 153              		.loc 1 109 1 view .LVU23
 154 0008 43EA0040 		orr	r0, r3, r0, lsl #16
 155 000c 7047     		bx	lr
 156              		.cfi_endproc
 157              	.LFE71:
 159              		.section	.text.ZL_RTC_DateToSec,"ax",%progbits
 160              		.align	1
 161              		.global	ZL_RTC_DateToSec
 162              		.syntax unified
 163              		.thumb
 164              		.thumb_func
 165              		.fpu softvfp
 167              	ZL_RTC_DateToSec:
 168              	.LVL7:
 169              	.LFB72:
 110:component/rtc/rtc.c **** 
 111:component/rtc/rtc.c **** 
 112:component/rtc/rtc.c **** 
 113:component/rtc/rtc.c **** /*  Date ----> Unix Time Stamp second  */
 114:component/rtc/rtc.c **** uint32_t ZL_RTC_DateToSec(const ZL_RTC_t* data)
 115:component/rtc/rtc.c **** {
 170              		.loc 1 115 1 is_stmt 1 view -0
 171              		.cfi_startproc
 172              		@ args = 0, pretend = 0, frame = 0
 173              		@ frame_needed = 0, uses_anonymous_args = 0
 174              		@ link register save eliminated.
 116:component/rtc/rtc.c **** 	uint32_t days = 0, seconds = 0;
 175              		.loc 1 116 2 view .LVU25
ARM GAS  /tmp/cclnTmoR.s 			page 6


 117:component/rtc/rtc.c **** 	uint16_t i;
 176              		.loc 1 117 2 view .LVU26
 118:component/rtc/rtc.c **** 	uint16_t year = (uint16_t) (data->Year + 2000);   //(data->Year + 2000);
 177              		.loc 1 118 2 view .LVU27
 178              		.loc 1 118 34 is_stmt 0 view .LVU28
 179 0000 8179     		ldrb	r1, [r0, #6]	@ zero_extendqisi2
 180              		.loc 1 118 11 view .LVU29
 181 0002 01F5FA61 		add	r1, r1, #2000
 182              	.LVL8:
 119:component/rtc/rtc.c **** 	/* Year is below offset year */
 120:component/rtc/rtc.c **** 	if (year < RTC_OFFSET_YEAR) 
 183              		.loc 1 120 2 is_stmt 1 view .LVU30
 184              		.loc 1 120 5 is_stmt 0 view .LVU31
 185 0006 40F2B173 		movw	r3, #1969
 186 000a 9942     		cmp	r1, r3
 187 000c 67D9     		bls	.L18
 115:component/rtc/rtc.c **** 	uint32_t days = 0, seconds = 0;
 188              		.loc 1 115 1 view .LVU32
 189 000e 70B4     		push	{r4, r5, r6}
 190              	.LCFI0:
 191              		.cfi_def_cfa_offset 12
 192              		.cfi_offset 4, -12
 193              		.cfi_offset 5, -8
 194              		.cfi_offset 6, -4
 121:component/rtc/rtc.c ****   {
 122:component/rtc/rtc.c **** 		return 0;
 123:component/rtc/rtc.c **** 	}
 124:component/rtc/rtc.c **** 	/* Days in back years */
 125:component/rtc/rtc.c **** 	for (i = RTC_OFFSET_YEAR; i < year; i++) 
 195              		.loc 1 125 9 view .LVU33
 196 0010 40F2B273 		movw	r3, #1970
 116:component/rtc/rtc.c **** 	uint16_t i;
 197              		.loc 1 116 11 view .LVU34
 198 0014 0024     		movs	r4, #0
 199 0016 0EE0     		b	.L10
 200              	.LVL9:
 201              	.L11:
 126:component/rtc/rtc.c ****   {
 127:component/rtc/rtc.c **** 		days += ZL_Year2Days(i);
 202              		.loc 1 127 11 discriminator 4 view .LVU35
 203 0018 324A     		ldr	r2, .L29
 204 001a A2FB0352 		umull	r5, r2, r2, r3
 205 001e D209     		lsrs	r2, r2, #7
 206 0020 4FF4C875 		mov	r5, #400
 207 0024 05FB1232 		mls	r2, r5, r2, r3
 208 0028 92B2     		uxth	r2, r2
 209 002a B2B9     		cbnz	r2, .L20
 210              		.loc 1 127 11 view .LVU36
 211 002c 4FF4B772 		mov	r2, #366
 212              	.L12:
 213              		.loc 1 127 8 discriminator 8 view .LVU37
 214 0030 1444     		add	r4, r4, r2
 215              	.LVL10:
 125:component/rtc/rtc.c ****   {
 216              		.loc 1 125 38 is_stmt 1 discriminator 8 view .LVU38
 125:component/rtc/rtc.c ****   {
 217              		.loc 1 125 39 is_stmt 0 discriminator 8 view .LVU39
ARM GAS  /tmp/cclnTmoR.s 			page 7


 218 0032 0133     		adds	r3, r3, #1
 219              	.LVL11:
 125:component/rtc/rtc.c ****   {
 220              		.loc 1 125 39 discriminator 8 view .LVU40
 221 0034 9BB2     		uxth	r3, r3
 222              	.LVL12:
 223              	.L10:
 125:component/rtc/rtc.c ****   {
 224              		.loc 1 125 28 is_stmt 1 discriminator 2 view .LVU41
 125:component/rtc/rtc.c ****   {
 225              		.loc 1 125 2 is_stmt 0 discriminator 2 view .LVU42
 226 0036 8B42     		cmp	r3, r1
 227 0038 12D2     		bcs	.L27
 228              		.loc 1 127 3 is_stmt 1 view .LVU43
 229              		.loc 1 127 11 is_stmt 0 view .LVU44
 230 003a 13F0030F 		tst	r3, #3
 231 003e EBD1     		bne	.L11
 232              		.loc 1 127 11 discriminator 1 view .LVU45
 233 0040 284A     		ldr	r2, .L29
 234 0042 A2FB0352 		umull	r5, r2, r2, r3
 235 0046 5209     		lsrs	r2, r2, #5
 236 0048 6425     		movs	r5, #100
 237 004a 05FB1232 		mls	r2, r5, r2, r3
 238 004e 92B2     		uxth	r2, r2
 239 0050 002A     		cmp	r2, #0
 240 0052 E1D0     		beq	.L11
 241              		.loc 1 127 11 view .LVU46
 242 0054 4FF4B772 		mov	r2, #366
 243 0058 EAE7     		b	.L12
 244              	.L20:
 245 005a 40F26D12 		movw	r2, #365
 246 005e E7E7     		b	.L12
 247              	.L27:
 128:component/rtc/rtc.c **** 	}
 129:component/rtc/rtc.c **** 	/* Days in current year */
 130:component/rtc/rtc.c **** 	for (i = 1; i < data->Month; i++) 
 248              		.loc 1 130 9 view .LVU47
 249 0060 0122     		movs	r2, #1
 250 0062 14E0     		b	.L14
 251              	.LVL13:
 252              	.L15:
 131:component/rtc/rtc.c ****   {
 132:component/rtc/rtc.c **** 		days += RTC_Months[ZL_Is_LeapYear(year)][i - 1];
 253              		.loc 1 132 22 discriminator 4 view .LVU48
 254 0064 1F4B     		ldr	r3, .L29
 255 0066 A3FB0153 		umull	r5, r3, r3, r1
 256 006a DB09     		lsrs	r3, r3, #7
 257 006c 4FF4C875 		mov	r5, #400
 258 0070 05FB1313 		mls	r3, r5, r3, r1
 259 0074 9BB2     		uxth	r3, r3
 260 0076 E3B9     		cbnz	r3, .L22
 261              		.loc 1 132 22 view .LVU49
 262 0078 0125     		movs	r5, #1
 263              	.L16:
 264              		.loc 1 132 46 discriminator 8 view .LVU50
 265 007a 561E     		subs	r6, r2, #1
 266              		.loc 1 132 43 discriminator 8 view .LVU51
ARM GAS  /tmp/cclnTmoR.s 			page 8


 267 007c 6B00     		lsls	r3, r5, #1
 268 007e 1D44     		add	r5, r5, r3
 269 0080 194B     		ldr	r3, .L29+4
 270 0082 03EB8503 		add	r3, r3, r5, lsl #2
 271 0086 9B5D     		ldrb	r3, [r3, r6]	@ zero_extendqisi2
 272              		.loc 1 132 8 discriminator 8 view .LVU52
 273 0088 1C44     		add	r4, r4, r3
 274              	.LVL14:
 130:component/rtc/rtc.c ****   {
 275              		.loc 1 130 31 is_stmt 1 discriminator 8 view .LVU53
 130:component/rtc/rtc.c ****   {
 276              		.loc 1 130 32 is_stmt 0 discriminator 8 view .LVU54
 277 008a 0132     		adds	r2, r2, #1
 278              	.LVL15:
 130:component/rtc/rtc.c ****   {
 279              		.loc 1 130 32 discriminator 8 view .LVU55
 280 008c 92B2     		uxth	r2, r2
 281              	.LVL16:
 282              	.L14:
 130:component/rtc/rtc.c ****   {
 283              		.loc 1 130 14 is_stmt 1 discriminator 2 view .LVU56
 130:component/rtc/rtc.c ****   {
 284              		.loc 1 130 22 is_stmt 0 discriminator 2 view .LVU57
 285 008e 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 130:component/rtc/rtc.c ****   {
 286              		.loc 1 130 2 discriminator 2 view .LVU58
 287 0090 9342     		cmp	r3, r2
 288 0092 10D9     		bls	.L28
 289              		.loc 1 132 3 is_stmt 1 view .LVU59
 290              		.loc 1 132 22 is_stmt 0 view .LVU60
 291 0094 11F0030F 		tst	r1, #3
 292 0098 E4D1     		bne	.L15
 293              		.loc 1 132 22 discriminator 1 view .LVU61
 294 009a 124B     		ldr	r3, .L29
 295 009c A3FB0153 		umull	r5, r3, r3, r1
 296 00a0 5B09     		lsrs	r3, r3, #5
 297 00a2 6425     		movs	r5, #100
 298 00a4 05FB1313 		mls	r3, r5, r3, r1
 299 00a8 9BB2     		uxth	r3, r3
 300 00aa 002B     		cmp	r3, #0
 301 00ac DAD0     		beq	.L15
 302              		.loc 1 132 22 view .LVU62
 303 00ae 0125     		movs	r5, #1
 304 00b0 E3E7     		b	.L16
 305              	.L22:
 306 00b2 0025     		movs	r5, #0
 307 00b4 E1E7     		b	.L16
 308              	.L28:
 133:component/rtc/rtc.c **** 	}
 134:component/rtc/rtc.c **** 	/* Day starts with 1 */
 135:component/rtc/rtc.c **** 	days += data->Day - 1;
 309              		.loc 1 135 2 is_stmt 1 view .LVU63
 310              		.loc 1 135 14 is_stmt 0 view .LVU64
 311 00b6 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 312              		.loc 1 135 7 view .LVU65
 313 00b8 2344     		add	r3, r3, r4
 314 00ba 013B     		subs	r3, r3, #1
ARM GAS  /tmp/cclnTmoR.s 			page 9


 315              	.LVL17:
 136:component/rtc/rtc.c **** 	seconds = days * RTC_SECONDS_PER_DAY;
 316              		.loc 1 136 2 is_stmt 1 view .LVU66
 137:component/rtc/rtc.c **** 	seconds += data->Hours * RTC_SECONDS_PER_HOUR;
 317              		.loc 1 137 2 view .LVU67
 318              		.loc 1 137 17 is_stmt 0 view .LVU68
 319 00bc 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 320              	.LVL18:
 321              		.loc 1 137 25 view .LVU69
 322 00be 4FF46164 		mov	r4, #3600
 323 00c2 04FB02F4 		mul	r4, r4, r2
 324              		.loc 1 137 10 view .LVU70
 325 00c6 094A     		ldr	r2, .L29+8
 326 00c8 02FB0343 		mla	r3, r2, r3, r4
 327              	.LVL19:
 138:component/rtc/rtc.c **** 	seconds += data->Minutes * RTC_SECONDS_PER_MINUTE;
 328              		.loc 1 138 2 is_stmt 1 view .LVU71
 329              		.loc 1 138 17 is_stmt 0 view .LVU72
 330 00cc 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 331              		.loc 1 138 27 view .LVU73
 332 00ce C2EB0212 		rsb	r2, r2, r2, lsl #4
 333              		.loc 1 138 10 view .LVU74
 334 00d2 03EB8203 		add	r3, r3, r2, lsl #2
 335              	.LVL20:
 139:component/rtc/rtc.c **** 	seconds += data->Seconds;
 336              		.loc 1 139 2 is_stmt 1 view .LVU75
 337              		.loc 1 139 17 is_stmt 0 view .LVU76
 338 00d6 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 339              	.LVL21:
 340              		.loc 1 139 10 view .LVU77
 341 00d8 1844     		add	r0, r0, r3
 342              	.LVL22:
 140:component/rtc/rtc.c **** 	
 141:component/rtc/rtc.c **** 	/* seconds = days * 86400; */
 142:component/rtc/rtc.c **** 	return seconds;
 343              		.loc 1 142 2 is_stmt 1 view .LVU78
 143:component/rtc/rtc.c **** }
 344              		.loc 1 143 1 is_stmt 0 view .LVU79
 345 00da 70BC     		pop	{r4, r5, r6}
 346              	.LCFI1:
 347              		.cfi_restore 6
 348              		.cfi_restore 5
 349              		.cfi_restore 4
 350              		.cfi_def_cfa_offset 0
 351 00dc 7047     		bx	lr
 352              	.LVL23:
 353              	.L18:
 122:component/rtc/rtc.c **** 	}
 354              		.loc 1 122 10 view .LVU80
 355 00de 0020     		movs	r0, #0
 356              	.LVL24:
 357              		.loc 1 143 1 view .LVU81
 358 00e0 7047     		bx	lr
 359              	.L30:
 360 00e2 00BF     		.align	2
 361              	.L29:
 362 00e4 1F85EB51 		.word	1374389535
ARM GAS  /tmp/cclnTmoR.s 			page 10


 363 00e8 00000000 		.word	.LANCHOR0
 364 00ec 80510100 		.word	86400
 365              		.cfi_endproc
 366              	.LFE72:
 368              		.section	.text.ZL_RTC_SetTime,"ax",%progbits
 369              		.align	1
 370              		.global	ZL_RTC_SetTime
 371              		.syntax unified
 372              		.thumb
 373              		.thumb_func
 374              		.fpu softvfp
 376              	ZL_RTC_SetTime:
 377              	.LVL25:
 378              	.LFB67:
  70:component/rtc/rtc.c ****   ZL_RTC_writeCounter(&hRTC, (ZL_RTC_DateToSec(ZL_Time) - Chine_Compensation));
 379              		.loc 1 70 1 is_stmt 1 view -0
 380              		.cfi_startproc
 381              		@ args = 0, pretend = 0, frame = 0
 382              		@ frame_needed = 0, uses_anonymous_args = 0
  70:component/rtc/rtc.c ****   ZL_RTC_writeCounter(&hRTC, (ZL_RTC_DateToSec(ZL_Time) - Chine_Compensation));
 383              		.loc 1 70 1 is_stmt 0 view .LVU83
 384 0000 08B5     		push	{r3, lr}
 385              	.LCFI2:
 386              		.cfi_def_cfa_offset 8
 387              		.cfi_offset 3, -8
 388              		.cfi_offset 14, -4
  71:component/rtc/rtc.c **** }
 389              		.loc 1 71 3 is_stmt 1 view .LVU84
  71:component/rtc/rtc.c **** }
 390              		.loc 1 71 31 is_stmt 0 view .LVU85
 391 0002 FFF7FEFF 		bl	ZL_RTC_DateToSec
 392              	.LVL26:
  71:component/rtc/rtc.c **** }
 393              		.loc 1 71 3 view .LVU86
 394 0006 A0F5E141 		sub	r1, r0, #28800
 395 000a 0248     		ldr	r0, .L33
 396 000c FFF7FEFF 		bl	ZL_RTC_writeCounter
 397              	.LVL27:
  72:component/rtc/rtc.c **** 
 398              		.loc 1 72 1 view .LVU87
 399 0010 08BD     		pop	{r3, pc}
 400              	.L34:
 401 0012 00BF     		.align	2
 402              	.L33:
 403 0014 00000000 		.word	hRTC
 404              		.cfi_endproc
 405              	.LFE67:
 407              		.section	.text.ZL_RTC_Init,"ax",%progbits
 408              		.align	1
 409              		.global	ZL_RTC_Init
 410              		.syntax unified
 411              		.thumb
 412              		.thumb_func
 413              		.fpu softvfp
 415              	ZL_RTC_Init:
 416              	.LVL28:
 417              	.LFB66:
ARM GAS  /tmp/cclnTmoR.s 			page 11


  33:component/rtc/rtc.c **** 
 418              		.loc 1 33 1 is_stmt 1 view -0
 419              		.cfi_startproc
 420              		@ args = 0, pretend = 0, frame = 8
 421              		@ frame_needed = 0, uses_anonymous_args = 0
  33:component/rtc/rtc.c **** 
 422              		.loc 1 33 1 is_stmt 0 view .LVU89
 423 0000 70B5     		push	{r4, r5, r6, lr}
 424              	.LCFI3:
 425              		.cfi_def_cfa_offset 16
 426              		.cfi_offset 4, -16
 427              		.cfi_offset 5, -12
 428              		.cfi_offset 6, -8
 429              		.cfi_offset 14, -4
 430 0002 82B0     		sub	sp, sp, #8
 431              	.LCFI4:
 432              		.cfi_def_cfa_offset 24
 433 0004 0646     		mov	r6, r0
  35:component/rtc/rtc.c **** 	hRTC.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
 434              		.loc 1 35 2 is_stmt 1 view .LVU90
  35:component/rtc/rtc.c **** 	hRTC.Init.AsynchPrediv = RTC_AUTO_1_SECOND;
 435              		.loc 1 35 16 is_stmt 0 view .LVU91
 436 0006 214C     		ldr	r4, .L42
 437 0008 214B     		ldr	r3, .L42+4
 438 000a 2360     		str	r3, [r4]
  36:component/rtc/rtc.c **** 
 439              		.loc 1 36 2 is_stmt 1 view .LVU92
  36:component/rtc/rtc.c **** 
 440              		.loc 1 36 25 is_stmt 0 view .LVU93
 441 000c 4FF0FF33 		mov	r3, #-1
 442 0010 6360     		str	r3, [r4, #4]
  38:component/rtc/rtc.c **** 	__HAL_RCC_BKP_CLK_ENABLE();
 443              		.loc 1 38 2 is_stmt 1 view .LVU94
 444 0012 FFF7FEFF 		bl	HAL_PWR_EnableBkUpAccess
 445              	.LVL29:
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 446              		.loc 1 39 2 view .LVU95
 447              	.LBB2:
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 448              		.loc 1 39 2 view .LVU96
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 449              		.loc 1 39 2 view .LVU97
 450 0016 1F4B     		ldr	r3, .L42+8
 451 0018 DA69     		ldr	r2, [r3, #28]
 452 001a 42F00062 		orr	r2, r2, #134217728
 453 001e DA61     		str	r2, [r3, #28]
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 454              		.loc 1 39 2 view .LVU98
 455 0020 DB69     		ldr	r3, [r3, #28]
 456 0022 03F00063 		and	r3, r3, #134217728
 457 0026 0193     		str	r3, [sp, #4]
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 458              		.loc 1 39 2 view .LVU99
 459 0028 019B     		ldr	r3, [sp, #4]
 460              	.LBE2:
  39:component/rtc/rtc.c **** 	__HAL_RCC_RTC_ENABLE();
 461              		.loc 1 39 2 view .LVU100
ARM GAS  /tmp/cclnTmoR.s 			page 12


  40:component/rtc/rtc.c **** 
 462              		.loc 1 40 2 view .LVU101
 463 002a 0125     		movs	r5, #1
 464 002c 1A4B     		ldr	r3, .L42+12
 465 002e 1D60     		str	r5, [r3]
  42:component/rtc/rtc.c ****   	HAL_NVIC_EnableIRQ(RTC_IRQn);
 466              		.loc 1 42 4 view .LVU102
 467 0030 2A46     		mov	r2, r5
 468 0032 0021     		movs	r1, #0
 469 0034 0320     		movs	r0, #3
 470 0036 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 471              	.LVL30:
  43:component/rtc/rtc.c **** 	  /* RTC Second IT */
 472              		.loc 1 43 4 view .LVU103
 473 003a 0320     		movs	r0, #3
 474 003c FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 475              	.LVL31:
  47:component/rtc/rtc.c **** 	if (status == RTC_STATUS_TIME_OK) 
 476              		.loc 1 47 2 view .LVU104
  47:component/rtc/rtc.c **** 	if (status == RTC_STATUS_TIME_OK) 
 477              		.loc 1 47 20 is_stmt 0 view .LVU105
 478 0040 2946     		mov	r1, r5
 479 0042 2046     		mov	r0, r4
 480 0044 FFF7FEFF 		bl	HAL_RTCEx_BKUPRead
 481              	.LVL32:
  48:component/rtc/rtc.c ****   	{
 482              		.loc 1 48 2 is_stmt 1 view .LVU106
  48:component/rtc/rtc.c ****   	{
 483              		.loc 1 48 5 is_stmt 0 view .LVU107
 484 0048 44F22133 		movw	r3, #17185
 485 004c 9842     		cmp	r0, r3
 486 004e 13D0     		beq	.L40
  56:component/rtc/rtc.c ****   	  	if(HAL_RTC_Init(&hRTC) != HAL_OK)
 487              		.loc 1 56 7 is_stmt 1 view .LVU108
 488 0050 0E4C     		ldr	r4, .L42
 489 0052 2046     		mov	r0, r4
 490              	.LVL33:
  56:component/rtc/rtc.c ****   	  	if(HAL_RTC_Init(&hRTC) != HAL_OK)
 491              		.loc 1 56 7 is_stmt 0 view .LVU109
 492 0054 FFF7FEFF 		bl	HAL_RTC_Init
 493              	.LVL34:
  57:component/rtc/rtc.c ****   	  	{
 494              		.loc 1 57 7 is_stmt 1 view .LVU110
  57:component/rtc/rtc.c ****   	  	{
 495              		.loc 1 57 10 is_stmt 0 view .LVU111
 496 0058 2046     		mov	r0, r4
 497 005a FFF7FEFF 		bl	HAL_RTC_Init
 498              	.LVL35:
  57:component/rtc/rtc.c ****   	  	{
 499              		.loc 1 57 9 view .LVU112
 500 005e 90B9     		cbnz	r0, .L41
 501              	.L38:
  61:component/rtc/rtc.c **** 		HAL_RTCEx_BKUPWrite(&hRTC, RTC_BKP_DR1, RTC_STATUS_TIME_OK);
 502              		.loc 1 61 7 is_stmt 1 view .LVU113
 503 0060 3046     		mov	r0, r6
 504 0062 FFF7FEFF 		bl	ZL_RTC_SetTime
 505              	.LVL36:
ARM GAS  /tmp/cclnTmoR.s 			page 13


  62:component/rtc/rtc.c **** 		return 0;
 506              		.loc 1 62 3 view .LVU114
 507 0066 44F22132 		movw	r2, #17185
 508 006a 0121     		movs	r1, #1
 509 006c 0748     		ldr	r0, .L42
 510 006e FFF7FEFF 		bl	HAL_RTCEx_BKUPWrite
 511              	.LVL37:
  63:component/rtc/rtc.c **** 	}
 512              		.loc 1 63 3 view .LVU115
  63:component/rtc/rtc.c **** 	}
 513              		.loc 1 63 10 is_stmt 0 view .LVU116
 514 0072 0020     		movs	r0, #0
 515              	.L37:
  65:component/rtc/rtc.c **** 
 516              		.loc 1 65 1 view .LVU117
 517 0074 02B0     		add	sp, sp, #8
 518              	.LCFI5:
 519              		.cfi_remember_state
 520              		.cfi_def_cfa_offset 16
 521              		@ sp needed
 522 0076 70BD     		pop	{r4, r5, r6, pc}
 523              	.LVL38:
 524              	.L40:
 525              	.LCFI6:
 526              		.cfi_restore_state
  50:component/rtc/rtc.c **** 		__HAL_RCC_CLEAR_RESET_FLAGS();
 527              		.loc 1 50 3 is_stmt 1 view .LVU118
 528 0078 2046     		mov	r0, r4
 529              	.LVL39:
  50:component/rtc/rtc.c **** 		__HAL_RCC_CLEAR_RESET_FLAGS();
 530              		.loc 1 50 3 is_stmt 0 view .LVU119
 531 007a FFF7FEFF 		bl	HAL_RTC_WaitForSynchro
 532              	.LVL40:
  51:component/rtc/rtc.c **** 		return 1;
 533              		.loc 1 51 3 is_stmt 1 view .LVU120
 534 007e 2846     		mov	r0, r5
 535 0080 064B     		ldr	r3, .L42+16
 536 0082 1D60     		str	r5, [r3]
  52:component/rtc/rtc.c **** 	}
 537              		.loc 1 52 3 view .LVU121
  52:component/rtc/rtc.c **** 	}
 538              		.loc 1 52 10 is_stmt 0 view .LVU122
 539 0084 F6E7     		b	.L37
 540              	.L41:
  59:component/rtc/rtc.c ****   	  	}
 541              		.loc 1 59 9 is_stmt 1 view .LVU123
 542 0086 FFF7FEFF 		bl	Error_Handler
 543              	.LVL41:
 544 008a E9E7     		b	.L38
 545              	.L43:
 546              		.align	2
 547              	.L42:
 548 008c 00000000 		.word	hRTC
 549 0090 00280040 		.word	1073752064
 550 0094 00100240 		.word	1073876992
 551 0098 3C044242 		.word	1111622716
 552 009c E0044242 		.word	1111622880
ARM GAS  /tmp/cclnTmoR.s 			page 14


 553              		.cfi_endproc
 554              	.LFE66:
 556              		.section	.text.ZL_RTC_SecToDate,"ax",%progbits
 557              		.align	1
 558              		.global	ZL_RTC_SecToDate
 559              		.syntax unified
 560              		.thumb
 561              		.thumb_func
 562              		.fpu softvfp
 564              	ZL_RTC_SecToDate:
 565              	.LVL42:
 566              	.LFB73:
 144:component/rtc/rtc.c **** 
 145:component/rtc/rtc.c **** 
 146:component/rtc/rtc.c **** /*  Unix Time Stamp second ----> Date  */
 147:component/rtc/rtc.c **** ZL_RTC_Result_t ZL_RTC_SecToDate(ZL_RTC_t* data, uint32_t unix) 
 148:component/rtc/rtc.c **** {
 567              		.loc 1 148 1 view -0
 568              		.cfi_startproc
 569              		@ args = 0, pretend = 0, frame = 0
 570              		@ frame_needed = 0, uses_anonymous_args = 0
 571              		@ link register save eliminated.
 572              		.loc 1 148 1 is_stmt 0 view .LVU125
 573 0000 70B4     		push	{r4, r5, r6}
 574              	.LCFI7:
 575              		.cfi_def_cfa_offset 12
 576              		.cfi_offset 4, -12
 577              		.cfi_offset 5, -8
 578              		.cfi_offset 6, -4
 149:component/rtc/rtc.c **** 	uint16_t year;
 579              		.loc 1 149 2 is_stmt 1 view .LVU126
 150:component/rtc/rtc.c **** 	
 151:component/rtc/rtc.c **** 	data->Unix = unix;
 580              		.loc 1 151 2 view .LVU127
 581              		.loc 1 151 13 is_stmt 0 view .LVU128
 582 0002 8160     		str	r1, [r0, #8]
 152:component/rtc/rtc.c **** 	data->Seconds = unix % 60;
 583              		.loc 1 152 2 is_stmt 1 view .LVU129
 584              		.loc 1 152 23 is_stmt 0 view .LVU130
 585 0004 434B     		ldr	r3, .L59
 586 0006 A3FB0142 		umull	r4, r2, r3, r1
 587 000a 5209     		lsrs	r2, r2, #5
 588 000c 1446     		mov	r4, r2
 589 000e C2EB0212 		rsb	r2, r2, r2, lsl #4
 590 0012 A1EB8202 		sub	r2, r1, r2, lsl #2
 591              		.loc 1 152 16 view .LVU131
 592 0016 0270     		strb	r2, [r0]
 153:component/rtc/rtc.c **** 
 154:component/rtc/rtc.c **** 	unix /= 60;
 593              		.loc 1 154 2 is_stmt 1 view .LVU132
 594              	.LVL43:
 155:component/rtc/rtc.c **** 	data->Minutes = unix % 60;
 595              		.loc 1 155 2 view .LVU133
 596              		.loc 1 155 23 is_stmt 0 view .LVU134
 597 0018 A3FB0423 		umull	r2, r3, r3, r4
 598 001c 5B09     		lsrs	r3, r3, #5
 599 001e 1946     		mov	r1, r3
ARM GAS  /tmp/cclnTmoR.s 			page 15


 600 0020 C3EB0313 		rsb	r3, r3, r3, lsl #4
 601 0024 A4EB8303 		sub	r3, r4, r3, lsl #2
 602              		.loc 1 155 16 view .LVU135
 603 0028 4370     		strb	r3, [r0, #1]
 156:component/rtc/rtc.c **** 
 157:component/rtc/rtc.c **** 	unix /= 60;
 604              		.loc 1 157 2 is_stmt 1 view .LVU136
 605              	.LVL44:
 158:component/rtc/rtc.c **** 	data->Hours = unix % 24;
 606              		.loc 1 158 2 view .LVU137
 607              		.loc 1 158 21 is_stmt 0 view .LVU138
 608 002a 3B4B     		ldr	r3, .L59+4
 609 002c A3FB0123 		umull	r2, r3, r3, r1
 610 0030 1B09     		lsrs	r3, r3, #4
 611 0032 1A46     		mov	r2, r3
 612 0034 03EB4303 		add	r3, r3, r3, lsl #1
 613 0038 A1EBC303 		sub	r3, r1, r3, lsl #3
 614              		.loc 1 158 14 view .LVU139
 615 003c 8370     		strb	r3, [r0, #2]
 159:component/rtc/rtc.c **** 
 160:component/rtc/rtc.c **** 	unix /= 24;
 616              		.loc 1 160 2 is_stmt 1 view .LVU140
 617              		.loc 1 160 7 is_stmt 0 view .LVU141
 618 003e 1146     		mov	r1, r2
 619              	.LVL45:
 161:component/rtc/rtc.c **** 	/* Get week day */
 162:component/rtc/rtc.c **** 	/* Monday is day one */
 163:component/rtc/rtc.c **** 	data->WeekDay = (unix + 3) % 7 + 1;
 620              		.loc 1 163 2 is_stmt 1 view .LVU142
 621              		.loc 1 163 24 is_stmt 0 view .LVU143
 622 0040 0332     		adds	r2, r2, #3
 623              		.loc 1 163 29 view .LVU144
 624 0042 364B     		ldr	r3, .L59+8
 625 0044 A3FB0243 		umull	r4, r3, r3, r2
 626 0048 D41A     		subs	r4, r2, r3
 627 004a 03EB5403 		add	r3, r3, r4, lsr #1
 628 004e 9B08     		lsrs	r3, r3, #2
 629 0050 C3EBC303 		rsb	r3, r3, r3, lsl #3
 630 0054 D31A     		subs	r3, r2, r3
 631              		.loc 1 163 33 view .LVU145
 632 0056 0133     		adds	r3, r3, #1
 633              		.loc 1 163 16 view .LVU146
 634 0058 C370     		strb	r3, [r0, #3]
 164:component/rtc/rtc.c **** 
 165:component/rtc/rtc.c **** 	year = 1970;
 635              		.loc 1 165 2 is_stmt 1 view .LVU147
 636              	.LVL46:
 637              		.loc 1 165 7 is_stmt 0 view .LVU148
 638 005a 40F2B273 		movw	r3, #1970
 639 005e 10E0     		b	.L50
 640              	.LVL47:
 641              	.L45:
 166:component/rtc/rtc.c **** 	while (1) 
 167:component/rtc/rtc.c ****   	{
 168:component/rtc/rtc.c **** 		if(ZL_Is_LeapYear(year)) 
 642              		.loc 1 168 6 discriminator 3 view .LVU149
 643 0060 2F4A     		ldr	r2, .L59+12
ARM GAS  /tmp/cclnTmoR.s 			page 16


 644 0062 A2FB0352 		umull	r5, r2, r2, r3
 645 0066 D209     		lsrs	r2, r2, #7
 646 0068 4FF4C875 		mov	r5, #400
 647 006c 05FB1232 		mls	r2, r5, r2, r3
 648 0070 92B2     		uxth	r2, r2
 649 0072 A2B9     		cbnz	r2, .L47
 650              	.L46:
 169:component/rtc/rtc.c ****     	{
 170:component/rtc/rtc.c **** 			if(unix >= 366)
 651              		.loc 1 170 4 is_stmt 1 view .LVU150
 652              		.loc 1 170 6 is_stmt 0 view .LVU151
 653 0074 B1F5B77F 		cmp	r1, #366
 654 0078 17D3     		bcc	.L48
 171:component/rtc/rtc.c **** 				unix -= 366;
 655              		.loc 1 171 5 is_stmt 1 view .LVU152
 656              		.loc 1 171 10 is_stmt 0 view .LVU153
 657 007a A1F5B771 		sub	r1, r1, #366
 658              	.LVL48:
 659              	.L49:
 172:component/rtc/rtc.c ****       		else
 173:component/rtc/rtc.c **** 				break;
 174:component/rtc/rtc.c **** 		}
 175:component/rtc/rtc.c ****     	else if(unix >= 365)
 176:component/rtc/rtc.c **** 			unix -= 365;
 177:component/rtc/rtc.c ****     	else
 178:component/rtc/rtc.c **** 			break;
 179:component/rtc/rtc.c **** 		year++;
 660              		.loc 1 179 3 is_stmt 1 view .LVU154
 661              		.loc 1 179 7 is_stmt 0 view .LVU155
 662 007e 0133     		adds	r3, r3, #1
 663              	.LVL49:
 664              		.loc 1 179 7 view .LVU156
 665 0080 9BB2     		uxth	r3, r3
 666              	.LVL50:
 166:component/rtc/rtc.c ****   	{
 667              		.loc 1 166 8 is_stmt 1 view .LVU157
 668              	.L50:
 166:component/rtc/rtc.c ****   	{
 669              		.loc 1 166 2 view .LVU158
 168:component/rtc/rtc.c ****     	{
 670              		.loc 1 168 3 view .LVU159
 168:component/rtc/rtc.c ****     	{
 671              		.loc 1 168 5 is_stmt 0 view .LVU160
 672 0082 13F00304 		ands	r4, r3, #3
 673 0086 EBD1     		bne	.L45
 168:component/rtc/rtc.c ****     	{
 674              		.loc 1 168 6 discriminator 1 view .LVU161
 675 0088 254A     		ldr	r2, .L59+12
 676 008a A2FB0352 		umull	r5, r2, r2, r3
 677 008e 5209     		lsrs	r2, r2, #5
 678 0090 6425     		movs	r5, #100
 679 0092 05FB1232 		mls	r2, r5, r2, r3
 680 0096 92B2     		uxth	r2, r2
 681 0098 002A     		cmp	r2, #0
 682 009a EBD1     		bne	.L46
 683 009c E0E7     		b	.L45
 684              	.L47:
ARM GAS  /tmp/cclnTmoR.s 			page 17


 175:component/rtc/rtc.c **** 			unix -= 365;
 685              		.loc 1 175 11 is_stmt 1 view .LVU162
 175:component/rtc/rtc.c **** 			unix -= 365;
 686              		.loc 1 175 13 is_stmt 0 view .LVU163
 687 009e B1F5B67F 		cmp	r1, #364
 688 00a2 02D9     		bls	.L48
 176:component/rtc/rtc.c ****     	else
 689              		.loc 1 176 4 is_stmt 1 view .LVU164
 176:component/rtc/rtc.c ****     	else
 690              		.loc 1 176 9 is_stmt 0 view .LVU165
 691 00a4 A1F26D11 		subw	r1, r1, #365
 692              	.LVL51:
 176:component/rtc/rtc.c ****     	else
 693              		.loc 1 176 9 view .LVU166
 694 00a8 E9E7     		b	.L49
 695              	.L48:
 180:component/rtc/rtc.c **** 	}
 181:component/rtc/rtc.c **** 	/* Get year in xx format */
 182:component/rtc/rtc.c **** 	data->Year = (uint8_t) (year - 2000);
 696              		.loc 1 182 2 is_stmt 1 view .LVU167
 697              		.loc 1 182 15 is_stmt 0 view .LVU168
 698 00aa 03F13002 		add	r2, r3, #48
 699              		.loc 1 182 13 view .LVU169
 700 00ae 8271     		strb	r2, [r0, #6]
 183:component/rtc/rtc.c **** 	/* Get month */
 184:component/rtc/rtc.c **** 	for(data->Month = 0; data->Month < 12; data->Month++)
 701              		.loc 1 184 2 is_stmt 1 view .LVU170
 702              		.loc 1 184 18 is_stmt 0 view .LVU171
 703 00b0 0022     		movs	r2, #0
 704 00b2 4271     		strb	r2, [r0, #5]
 705              		.loc 1 184 2 view .LVU172
 706 00b4 11E0     		b	.L51
 707              	.L52:
 185:component/rtc/rtc.c ****   	{
 186:component/rtc/rtc.c **** 		if(ZL_Is_LeapYear(year))
 708              		.loc 1 186 6 discriminator 3 view .LVU173
 709 00b6 1A4A     		ldr	r2, .L59+12
 710 00b8 A2FB0362 		umull	r6, r2, r2, r3
 711 00bc D209     		lsrs	r2, r2, #7
 712 00be 4FF4C876 		mov	r6, #400
 713 00c2 06FB1232 		mls	r2, r6, r2, r3
 714 00c6 92B2     		uxth	r2, r2
 715 00c8 BAB9     		cbnz	r2, .L54
 716              	.L53:
 187:component/rtc/rtc.c ****     	{
 188:component/rtc/rtc.c **** 			if(unix >= (uint32_t)RTC_Months[1][data->Month])
 717              		.loc 1 188 4 is_stmt 1 view .LVU174
 718              		.loc 1 188 38 is_stmt 0 view .LVU175
 719 00ca 164A     		ldr	r2, .L59+16
 720 00cc 2A44     		add	r2, r2, r5
 721 00ce 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 722              		.loc 1 188 6 view .LVU176
 723 00d0 8A42     		cmp	r2, r1
 724 00d2 18D8     		bhi	.L55
 189:component/rtc/rtc.c **** 				unix -= RTC_Months[1][data->Month];
 725              		.loc 1 189 5 is_stmt 1 view .LVU177
 726              		.loc 1 189 10 is_stmt 0 view .LVU178
ARM GAS  /tmp/cclnTmoR.s 			page 18


 727 00d4 891A     		subs	r1, r1, r2
 728              	.LVL52:
 729              	.L56:
 184:component/rtc/rtc.c ****   	{
 730              		.loc 1 184 41 is_stmt 1 discriminator 2 view .LVU179
 184:component/rtc/rtc.c ****   	{
 731              		.loc 1 184 52 is_stmt 0 discriminator 2 view .LVU180
 732 00d6 0135     		adds	r5, r5, #1
 733 00d8 4571     		strb	r5, [r0, #5]
 734              	.L51:
 184:component/rtc/rtc.c ****   	{
 735              		.loc 1 184 23 is_stmt 1 discriminator 1 view .LVU181
 184:component/rtc/rtc.c ****   	{
 736              		.loc 1 184 27 is_stmt 0 discriminator 1 view .LVU182
 737 00da 4579     		ldrb	r5, [r0, #5]	@ zero_extendqisi2
 184:component/rtc/rtc.c ****   	{
 738              		.loc 1 184 2 discriminator 1 view .LVU183
 739 00dc 0B2D     		cmp	r5, #11
 740 00de 12D8     		bhi	.L55
 186:component/rtc/rtc.c ****     	{
 741              		.loc 1 186 3 is_stmt 1 view .LVU184
 186:component/rtc/rtc.c ****     	{
 742              		.loc 1 186 5 is_stmt 0 view .LVU185
 743 00e0 002C     		cmp	r4, #0
 744 00e2 E8D1     		bne	.L52
 186:component/rtc/rtc.c ****     	{
 745              		.loc 1 186 6 discriminator 1 view .LVU186
 746 00e4 0E4A     		ldr	r2, .L59+12
 747 00e6 A2FB0362 		umull	r6, r2, r2, r3
 748 00ea 5209     		lsrs	r2, r2, #5
 749 00ec 6426     		movs	r6, #100
 750 00ee 06FB1232 		mls	r2, r6, r2, r3
 751 00f2 92B2     		uxth	r2, r2
 752 00f4 002A     		cmp	r2, #0
 753 00f6 E8D1     		bne	.L53
 754 00f8 DDE7     		b	.L52
 755              	.L54:
 190:component/rtc/rtc.c ****       		else
 191:component/rtc/rtc.c **** 				break;
 192:component/rtc/rtc.c **** 		}
 193:component/rtc/rtc.c ****     	else if(unix >= (uint32_t)RTC_Months[0][data->Month])
 756              		.loc 1 193 11 is_stmt 1 view .LVU187
 757              		.loc 1 193 45 is_stmt 0 view .LVU188
 758 00fa 0A4A     		ldr	r2, .L59+16
 759 00fc 525D     		ldrb	r2, [r2, r5]	@ zero_extendqisi2
 760              		.loc 1 193 13 view .LVU189
 761 00fe 8A42     		cmp	r2, r1
 762 0100 01D8     		bhi	.L55
 194:component/rtc/rtc.c **** 			unix -= RTC_Months[0][data->Month];
 763              		.loc 1 194 4 is_stmt 1 view .LVU190
 764              		.loc 1 194 9 is_stmt 0 view .LVU191
 765 0102 891A     		subs	r1, r1, r2
 766              	.LVL53:
 767              		.loc 1 194 9 view .LVU192
 768 0104 E7E7     		b	.L56
 769              	.L55:
 195:component/rtc/rtc.c ****     	else
ARM GAS  /tmp/cclnTmoR.s 			page 19


 196:component/rtc/rtc.c **** 			break;
 197:component/rtc/rtc.c **** 	}
 198:component/rtc/rtc.c **** 
 199:component/rtc/rtc.c **** 	data->Month++;
 770              		.loc 1 199 2 is_stmt 1 view .LVU193
 771              		.loc 1 199 13 is_stmt 0 view .LVU194
 772 0106 0135     		adds	r5, r5, #1
 773 0108 4571     		strb	r5, [r0, #5]
 200:component/rtc/rtc.c **** 	data->Day = unix + 1;
 774              		.loc 1 200 2 is_stmt 1 view .LVU195
 775              		.loc 1 200 19 is_stmt 0 view .LVU196
 776 010a 0131     		adds	r1, r1, #1
 777              	.LVL54:
 778              		.loc 1 200 12 view .LVU197
 779 010c 0171     		strb	r1, [r0, #4]
 201:component/rtc/rtc.c **** 
 202:component/rtc/rtc.c **** 	return ZL_RTC_Result_Ok;
 780              		.loc 1 202 2 is_stmt 1 view .LVU198
 203:component/rtc/rtc.c **** }
 781              		.loc 1 203 1 is_stmt 0 view .LVU199
 782 010e 0020     		movs	r0, #0
 783              	.LVL55:
 784              		.loc 1 203 1 view .LVU200
 785 0110 70BC     		pop	{r4, r5, r6}
 786              	.LCFI8:
 787              		.cfi_restore 6
 788              		.cfi_restore 5
 789              		.cfi_restore 4
 790              		.cfi_def_cfa_offset 0
 791 0112 7047     		bx	lr
 792              	.L60:
 793              		.align	2
 794              	.L59:
 795 0114 89888888 		.word	-2004318071
 796 0118 ABAAAAAA 		.word	-1431655765
 797 011c 25499224 		.word	613566757
 798 0120 1F85EB51 		.word	1374389535
 799 0124 00000000 		.word	.LANCHOR0
 800              		.cfi_endproc
 801              	.LFE73:
 803              		.section	.text.ZL_RTC_GetTime,"ax",%progbits
 804              		.align	1
 805              		.global	ZL_RTC_GetTime
 806              		.syntax unified
 807              		.thumb
 808              		.thumb_func
 809              		.fpu softvfp
 811              	ZL_RTC_GetTime:
 812              	.LVL56:
 813              	.LFB68:
  77:component/rtc/rtc.c ****   ZL_RTC_SecToDate(ZL_Time, ZL_RTC_ReadCounter(&hRTC));
 814              		.loc 1 77 1 is_stmt 1 view -0
 815              		.cfi_startproc
 816              		@ args = 0, pretend = 0, frame = 0
 817              		@ frame_needed = 0, uses_anonymous_args = 0
  77:component/rtc/rtc.c ****   ZL_RTC_SecToDate(ZL_Time, ZL_RTC_ReadCounter(&hRTC));
 818              		.loc 1 77 1 is_stmt 0 view .LVU202
ARM GAS  /tmp/cclnTmoR.s 			page 20


 819 0000 10B5     		push	{r4, lr}
 820              	.LCFI9:
 821              		.cfi_def_cfa_offset 8
 822              		.cfi_offset 4, -8
 823              		.cfi_offset 14, -4
 824 0002 0446     		mov	r4, r0
  78:component/rtc/rtc.c **** }
 825              		.loc 1 78 3 is_stmt 1 view .LVU203
 826 0004 0348     		ldr	r0, .L63
 827              	.LVL57:
  78:component/rtc/rtc.c **** }
 828              		.loc 1 78 3 is_stmt 0 view .LVU204
 829 0006 FFF7FEFF 		bl	ZL_RTC_ReadCounter
 830              	.LVL58:
 831 000a 0146     		mov	r1, r0
 832 000c 2046     		mov	r0, r4
 833 000e FFF7FEFF 		bl	ZL_RTC_SecToDate
 834              	.LVL59:
  79:component/rtc/rtc.c **** 
 835              		.loc 1 79 1 view .LVU205
 836 0012 10BD     		pop	{r4, pc}
 837              	.LVL60:
 838              	.L64:
  79:component/rtc/rtc.c **** 
 839              		.loc 1 79 1 view .LVU206
 840              		.align	2
 841              	.L63:
 842 0014 00000000 		.word	hRTC
 843              		.cfi_endproc
 844              	.LFE68:
 846              		.section	.text.get_eng_week,"ax",%progbits
 847              		.align	1
 848              		.global	get_eng_week
 849              		.syntax unified
 850              		.thumb
 851              		.thumb_func
 852              		.fpu softvfp
 854              	get_eng_week:
 855              	.LVL61:
 856              	.LFB74:
 204:component/rtc/rtc.c **** 
 205:component/rtc/rtc.c **** 
 206:component/rtc/rtc.c **** char *get_eng_week(uint8_t week_num)
 207:component/rtc/rtc.c **** {
 857              		.loc 1 207 1 is_stmt 1 view -0
 858              		.cfi_startproc
 859              		@ args = 0, pretend = 0, frame = 32
 860              		@ frame_needed = 0, uses_anonymous_args = 0
 861              		@ link register save eliminated.
 862              		.loc 1 207 1 is_stmt 0 view .LVU208
 863 0000 70B4     		push	{r4, r5, r6}
 864              	.LCFI10:
 865              		.cfi_def_cfa_offset 12
 866              		.cfi_offset 4, -12
 867              		.cfi_offset 5, -8
 868              		.cfi_offset 6, -4
 869 0002 89B0     		sub	sp, sp, #36
ARM GAS  /tmp/cclnTmoR.s 			page 21


 870              	.LCFI11:
 871              		.cfi_def_cfa_offset 48
 872 0004 0646     		mov	r6, r0
 208:component/rtc/rtc.c **** 	char *wday[] = {"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
 873              		.loc 1 208 2 is_stmt 1 view .LVU209
 874              		.loc 1 208 8 is_stmt 0 view .LVU210
 875 0006 01AC     		add	r4, sp, #4
 876 0008 074D     		ldr	r5, .L67
 877 000a 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 878              	.LVL62:
 879              		.loc 1 208 8 view .LVU211
 880 000c 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 881 000e 95E80700 		ldm	r5, {r0, r1, r2}
 882 0012 84E80700 		stm	r4, {r0, r1, r2}
 209:component/rtc/rtc.c **** 	return wday[week_num-1];
 883              		.loc 1 209 2 is_stmt 1 view .LVU212
 884              		.loc 1 209 22 is_stmt 0 view .LVU213
 885 0016 013E     		subs	r6, r6, #1
 886              		.loc 1 209 13 view .LVU214
 887 0018 08AB     		add	r3, sp, #32
 888 001a 03EB8606 		add	r6, r3, r6, lsl #2
 210:component/rtc/rtc.c **** }...
 889              		.loc 1 210 1 view .LVU215
 890 001e 56F81C0C 		ldr	r0, [r6, #-28]
 891 0022 09B0     		add	sp, sp, #36
 892              	.LCFI12:
 893              		.cfi_def_cfa_offset 12
 894              		@ sp needed
 895 0024 70BC     		pop	{r4, r5, r6}
 896              	.LCFI13:
 897              		.cfi_restore 6
 898              		.cfi_restore 5
 899              		.cfi_restore 4
 900              		.cfi_def_cfa_offset 0
 901 0026 7047     		bx	lr
 902              	.L68:
 903              		.align	2
 904              	.L67:
 905 0028 00000000 		.word	.LANCHOR1
 906              		.cfi_endproc
 907              	.LFE74:
 909              		.comm	RTC_TimeStruct,3,4
 910              		.comm	RTC_DateStruct,4,4
 911              		.comm	hRTC,20,4
 912              		.section	.rodata
 913              		.align	2
 914              		.set	.LANCHOR1,. + 0
 915              	.LC8:
 916 0000 00000000 		.word	.LC0
 917 0004 04000000 		.word	.LC1
 918 0008 08000000 		.word	.LC2
 919 000c 0C000000 		.word	.LC3
 920 0010 10000000 		.word	.LC4
 921 0014 14000000 		.word	.LC5
 922 0018 18000000 		.word	.LC6
 923              		.section	.rodata.RTC_Months,"a"
 924              		.align	2
ARM GAS  /tmp/cclnTmoR.s 			page 22


 925              		.set	.LANCHOR0,. + 0
 928              	RTC_Months:
 929 0000 1F1C1F1E 		.ascii	"\037\034\037\036\037\036\037\037\036\037\036\037"
 929      1F1E1F1F 
 929      1E1F1E1F 
 930 000c 1F1D1F1E 		.ascii	"\037\035\037\036\037\036\037\037\036\037\036\037"
 930      1F1E1F1F 
 930      1E1F1E1F 
 931              		.text
 932              	.Letext0:
 933              		.file 2 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/machine/_de
 934              		.file 3 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_stdint
 935              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 936              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 937              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 938              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 939              		.file 8 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/inclu
 940              		.file 9 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_types.
 941              		.file 10 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/reent.
 942              		.file 11 "/home/yhf/toolchains/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/lock.h
 943              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 944              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc.h"
 945              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 946              		.file 15 "component/rtc/rtc.h"
 947              		.file 16 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_pwr.h"
 948              		.file 17 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
 949              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc_ex.h"
 950              		.file 19 "app/Inc/main.h"
ARM GAS  /tmp/cclnTmoR.s 			page 23


DEFINED SYMBOLS
                            *ABS*:0000000000000000 rtc.c
     /tmp/cclnTmoR.s:13     .rodata.str1.4:0000000000000000 $d
     /tmp/cclnTmoR.s:38     .text.HAL_RTC_MspDeInit:0000000000000000 $t
     /tmp/cclnTmoR.s:46     .text.HAL_RTC_MspDeInit:0000000000000000 HAL_RTC_MspDeInit
     /tmp/cclnTmoR.s:75     .text.HAL_RTC_MspDeInit:0000000000000014 $d
     /tmp/cclnTmoR.s:81     .text.ZL_RTC_writeCounter:0000000000000000 $t
     /tmp/cclnTmoR.s:88     .text.ZL_RTC_writeCounter:0000000000000000 ZL_RTC_writeCounter
     /tmp/cclnTmoR.s:126    .text.ZL_RTC_ReadCounter:0000000000000000 $t
     /tmp/cclnTmoR.s:133    .text.ZL_RTC_ReadCounter:0000000000000000 ZL_RTC_ReadCounter
     /tmp/cclnTmoR.s:160    .text.ZL_RTC_DateToSec:0000000000000000 $t
     /tmp/cclnTmoR.s:167    .text.ZL_RTC_DateToSec:0000000000000000 ZL_RTC_DateToSec
     /tmp/cclnTmoR.s:362    .text.ZL_RTC_DateToSec:00000000000000e4 $d
     /tmp/cclnTmoR.s:369    .text.ZL_RTC_SetTime:0000000000000000 $t
     /tmp/cclnTmoR.s:376    .text.ZL_RTC_SetTime:0000000000000000 ZL_RTC_SetTime
     /tmp/cclnTmoR.s:403    .text.ZL_RTC_SetTime:0000000000000014 $d
                            *COM*:0000000000000014 hRTC
     /tmp/cclnTmoR.s:408    .text.ZL_RTC_Init:0000000000000000 $t
     /tmp/cclnTmoR.s:415    .text.ZL_RTC_Init:0000000000000000 ZL_RTC_Init
     /tmp/cclnTmoR.s:548    .text.ZL_RTC_Init:000000000000008c $d
     /tmp/cclnTmoR.s:557    .text.ZL_RTC_SecToDate:0000000000000000 $t
     /tmp/cclnTmoR.s:564    .text.ZL_RTC_SecToDate:0000000000000000 ZL_RTC_SecToDate
     /tmp/cclnTmoR.s:795    .text.ZL_RTC_SecToDate:0000000000000114 $d
     /tmp/cclnTmoR.s:804    .text.ZL_RTC_GetTime:0000000000000000 $t
     /tmp/cclnTmoR.s:811    .text.ZL_RTC_GetTime:0000000000000000 ZL_RTC_GetTime
     /tmp/cclnTmoR.s:842    .text.ZL_RTC_GetTime:0000000000000014 $d
     /tmp/cclnTmoR.s:847    .text.get_eng_week:0000000000000000 $t
     /tmp/cclnTmoR.s:854    .text.get_eng_week:0000000000000000 get_eng_week
     /tmp/cclnTmoR.s:905    .text.get_eng_week:0000000000000028 $d
                            *COM*:0000000000000003 RTC_TimeStruct
                            *COM*:0000000000000004 RTC_DateStruct
     /tmp/cclnTmoR.s:913    .rodata:0000000000000000 $d
     /tmp/cclnTmoR.s:924    .rodata.RTC_Months:0000000000000000 $d
     /tmp/cclnTmoR.s:928    .rodata.RTC_Months:0000000000000000 RTC_Months

UNDEFINED SYMBOLS
HAL_PWR_EnableBkUpAccess
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_RTCEx_BKUPRead
HAL_RTC_Init
HAL_RTCEx_BKUPWrite
HAL_RTC_WaitForSynchro
Error_Handler
